//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중
//개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중개발중

import React, { useEffect, useRef, useState } from 'react';
import { useLocation } from 'react-router-dom';

import TextScroll from '@/components/tidings/mission/textScroll';
import CategoryList from '@/components/common/categoryList';
import TidingsCard2 from '@/components/tidings/tidingsCard2';
import TagIcon from '@/components/common/tagBtn';

import { mockupData } from '@/db/mockup';

// 스와이퍼 모듈
import { Swiper, SwiperSlide } from 'swiper/react';
import { Navigation, Pagination, Scrollbar, A11y } from 'swiper/modules';
import 'swiper/css';
import 'swiper/css/navigation';
import 'swiper/css/pagination';
import 'swiper/css/scrollbar';

const SwiperSec = ({ pageMode, findedMockupData }) => {
  return (
    <Swiper
      modules={[Navigation, Pagination, Scrollbar, A11y]}
      className={`px-20`}
      spaceBetween={64}
      slidesPerView={
        findedMockupData && findedMockupData?.length < 3 ? 2 : undefined
      }
      onSlideChange={() => console.log('slide change')}
      onSwiper={swiper => console.log(swiper)}
      breakpoints={{
        640: {
          slidesPerView: 1,
          spaceBetween: 16,
        },
        768: {
          slidesPerView: 2,
          spaceBetween: 32,
        },
        1024: {
          slidesPerView:
            findedMockupData && findedMockupData?.length >= 3 ? 3 : 1,
          spaceBetween: 64,
        },
      }}
    >
      {findedMockupData?.map((item, key) => (
        <SwiperSlide className={`flex items-center justify-center`} key={key}>
          <TidingsCard2
            pageMode={pageMode}
            key={item.id}
            allData={findedMockupData}
            item={item}
          />
        </SwiperSlide>
      ))}
    </Swiper>
  );
};

// 해당 페이지는 후원과 레이아웃이 같아 페이지 모드를 감지하여 컨텐츠만 바꿔끼도록 설계되었습니다.
// pageMode 에 따라 불러오는 컨텐츠 분기를 걸어놓았습니다.

const TidingsMission = () => {
  // const location = useLocation();
  // const contentBox = useRef(null);
  // const [findedMockupData, setfindedMockupData] = useState();
  // const [pageMode, setPageMode] = useState('');
  // const [pagingNum, setPagingNum] = useState(0);
  // const [bgBoxPositon, setBgBoxPosition] = useState(0);
  // const [selectedId, setSelectedId] = useState(0);

  // // 초기 데이터를 불러오고 페이지 경로에 따라 맞는 데이터를 부르는 부분입니다.
  // const mockupExport = mockupData.filter(item => {
  //   return item.path.includes(location.pathname);
  // });
  // const mockupExportedData = mockupExport?.[0]?.data;

  // // 불러온 mockUp 데이터를 categorylist 에서 find 연동을 위하여 state 에 한번 넣습니다.
  // useEffect(() => {
  //   setfindedMockupData(mockupExportedData);
  // }, [location, selectedId]);

  // // category list 에서 selectedId 에 따라 filter 연동을 위하여 state 에 update 합니다.
  // useEffect(() => {
  //   if (selectedId === 0) {
  //     setfindedMockupData(mockupExportedData);
  //   } else {
  //     setfindedMockupData(
  //       mockupExportedData.filter(item => {
  //         return item?.tag?.some(obj => obj.id === Number(selectedId));
  //       })
  //     );
  //   }
  // }, [selectedId]);

  // useEffect(() => {
  //   if (location?.pathname?.includes('tidings/mission')) {
  //     setPageMode('mission');
  //   } else if (location?.pathname?.includes('tidings/support')) {
  //     setPageMode('support');
  //   }
  // }, [pageMode, location]);

  // const pagingNext = () => {
  //   if (pagingNum < findedMockupData?.length - 1) {
  //     setPagingNum(item => {
  //       return item + 1;
  //     });
  //   } else {
  //     console.log('최대치도달');
  //   }
  // };
  // const pagingPrev = () => {
  //   if (pagingNum > 0) {
  //     setPagingNum(item => {
  //       return item - 1;
  //     });
  //   } else {
  //     console.log('최소치도달');
  //   }
  // };

  // const positionFind = e => {
  //   setBgBoxPosition(e.target.offsetTop);
  // };

  return <>개발중</>;
  if (!findedMockupData) return <></>;

  return (
    <>
      <CategoryList setSelectedId={setSelectedId} />
      <section
        className={`flex w-full flex-col items-center justify-center pb-160 pt-32 max-lg:mb-20 max-lg:px-20 max-lg:pb-0 max-lg:pt-0`}
      >
        <div
          className={`hidden w-full max-w-1560 flex-wrap items-start justify-center gap-24 max-lg:flex`}
        >
          {findedMockupData?.map(item => (
            <TidingsCard2
              pageMode={pageMode}
              key={item.id}
              allData={mockupExportedData}
              item={item}
            />
          ))}
        </div>

        <div
          className={`flex w-full max-w-1808 flex-wrap items-start justify-center gap-24 max-lg:hidden`}
        >
          <SwiperSec pageMode={pageMode} findedMockupData={findedMockupData} />
        </div>
        <TextScroll />
        <div
          className={`flex w-full max-w-1200 items-start justify-center px-20 max-lg:hidden`}
        >
          <div className={`w-full`}>
            {findedMockupData?.[pagingNum] ? (
              <div className={`h-656 w-full max-w-560`}>
                <div
                  className={`rounded-br-16 rounded-tr-16 border-1 border-grey-400 bg-white-solid pr-32 pt-32`}
                >
                  <img
                    className={`w-full rounded-br-16 rounded-tr-16`}
                    src={`${findedMockupData?.[pagingNum].src}`}
                    alt=''
                  />
                  <div
                    className={`flex items-center justify-start gap-16 px-24 py-24`}
                  >
                    <button
                      onClick={() => {
                        pagingPrev();
                      }}
                    >
                      <img
                        src={`${import.meta.env.VITE_PUBLIC_URL}images/icon/arrow_left_rounded.svg`}
                        alt=''
                      />
                    </button>
                    <span className={`text-bold16 text-grey-900`}>
                      {pagingNum !== null && pagingNum !== undefined
                        ? pagingNum + 1
                        : ''}
                    </span>
                    <span className={`text-regular16 text-grey-500`}>/</span>
                    <span className={`text-regular16 text-grey-500`}>
                      {findedMockupData?.length ? findedMockupData?.length : ''}
                    </span>
                    <button
                      onClick={() => {
                        pagingNext();
                      }}
                    >
                      <img
                        src={`${import.meta.env.VITE_PUBLIC_URL}images/icon/arrow_right_rounded.svg`}
                        alt=''
                      />
                    </button>
                  </div>
                </div>
                <div
                  className={`flex flex-col items-start justify-center gap-16 py-24`}
                >
                  <div className={`flex items-center justify-start gap-16`}>
                    {findedMockupData?.[pagingNum]?.tag?.map((item, key) => (
                      <TagIcon
                        id={item.id}
                        text={item.text}
                        mode={item.mode}
                        key={key}
                      />
                    ))}
                    <span className={`text-regular14 text-grey-500`}>
                      {findedMockupData?.[pagingNum]?.start_date}
                    </span>
                  </div>
                  <div>
                    <span className={`text-bold24 text-grey-900`}>
                      {findedMockupData?.[pagingNum]?.title}
                    </span>
                  </div>
                </div>
              </div>
            ) : (
              <></>
            )}
          </div>
          <div
            ref={contentBox}
            className={`relative flex w-full max-w-616 flex-col items-center justify-start gap-16`}
          >
            <div
              style={{ top: `${bgBoxPositon}px` }}
              className={`absolute left-0 z-10 h-80 w-full rounded-16 bg-white-solid shadow-sm transition`}
            ></div>
            {findedMockupData?.slice(0, 7).map(data => (
              <div
                onMouseEnter={e => {
                  positionFind(e);
                }}
                className={`relative z-20 flex h-80 w-full items-center justify-between px-24 py-24`}
                key={data.id}
              >
                <div className={`flex items-center justify-center gap-16`}>
                  {data.tag.slice(0, 1).map((item, key) => (
                    <TagIcon id={item.id} key={key} text={item.text} />
                  ))}
                  <span className={`text-bold18 text-grey-900`}>
                    {data.title}
                  </span>
                </div>
                <span className={`text-regular14 text-grey-400`}>
                  {data.start_date}
                </span>
              </div>
            ))}
          </div>
        </div>
      </section>
    </>
  );
};

export default TidingsMission;
